---
title: "React v16.13.0"
author: [threepointone]
redirect_from:
  - "blog/2020/03/02/react-v16.13.0.html"
---

Vandaag releasen we 16.13.0. Hij bevat bugfixes en nieuwe deprecated-waarschuwingen om te helpen voorbereiden op een toekomstige release.

## Nieuwe Waarschuwingen {#new-warnings}

### Waarschuwingen voor sommige wijzigingen tijdens het renderen {#warnings-for-some-updates-during-render}

Een React component zou geen neveneffecten moeten veroorzaken in andere componenten tijdens het renderen.

Het aanroepen van `setState` tijdens het renderen wordt ondersteund, maar [alleen van *dezelfde component*](/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops). Wanneer je tijdens het renderen `setState` van een andere component aanroept, zul je nu een waarschuwing te zien krijgen:

```
Warning: Cannot update a component from inside the function body of a different component.
```

**Deze waarschuwing zal je helpen om applicatie-bugs te vinden veroorzaakt door onbedoelde state wijzigingen.** In het uitzonderlijke geval dat je opzettelijk de state van een andere component wilt veranderen als resultaat van het renderen kun je de `setState` in een `useEffect` inpakken.

### Waarschuwingen voor conflicterende styling -regels {#warnings-for-conflicting-style-rules}

Als je dynamisch een `style` toepast die longhand en shorthand versies bevat van CSS-properties, kunnen bepaalde combinaties van wijzigingen inconsistente styling veroozaken. Bijvoorbeeld: 

```js
<div style={toggle ? 
  { background: 'blue', backgroundColor: 'red' } : 
  { backgroundColor: 'red' }
}>
  ...
</div> 
```

Je verwacht misschien dat deze `<div>` altijd een rode background zal hebben, onafhankelijk van de waarde van `toggle`. Maar bij het wijzigen van de waarde van `toggle` van `true` naar `false`, zal de achtergrond beginnen als `red` en vervolgens afwisselend `transparent` en `blue` worden, [zoals je kunt zien in deze demonstratie](https://codesandbox.io/s/suspicious-sunset-g3jub).
  
**React detecteert nu conflicterende styling-regels en logt een waarschuwing.** Om het probleem op te lossen, meng geen shorthand en longhand versies van dezelfde CSS-property in de `style` prop.

### Waarschuwingen voor sommige uitgefaseerde string refs {#warnings-for-some-deprecated-string-refs}

[String Refs is een verouderde API](/docs/refs-and-the-dom.html#legacy-api-string-refs) die wordt ontmoedigt en in de toekomst zal worden uitgefaseerd:

```js
<Button ref="myRef" />
```

(Verwar String Refs niet niet refs in het algemeen, die **blijven volledig ondersteund**.)

In de toekomst zullen we in een geautomatiseerd script voorzien (een "codemod") om String Refs te migreren. Sommige gevallen kunnen echter niet automatisch worden gemigreerd. Deze release voegt **alleen voor die gevallen** een nieuwe waarschuwing toe vooruitlopend op de uitfasering.

Hij zal bijvoorbeeld afgaan wanneer je String Refs gebruikt samen met het Render-Prop-patroon:

```jsx
class ClassWithRenderProp extends React.Component {
  componentDidMount() {
    doSomething(this.refs.myRef);
  }
  render() {
    return this.props.children();
  }
}

class ClassParent extends React.Component {
  render() {
    return (
      <ClassWithRenderProp>
        {() => <Button ref="myRef" />}
      </ClassWithRenderProp>
    );
  }
}
```

Code zoals deze wijst vaak op bugs. (Je zou misschien verwachten dat de ref beschikbaar is op `ClassParent` maar het wordt in plaats daarvan op `ClassWithRenderProp` geplaatst).

**Hoogst waarschijnlijk heb je geen code als deze**. Als je dat wel hebt en het opzettelijk is, converteer het dan naar [`React.createRef()`](/docs/refs-and-the-dom.html#creating-refs):

```jsx
class ClassWithRenderProp extends React.Component {
  myRef = React.createRef();
  componentDidMount() {
    doSomething(this.myRef.current);
  }
  render() {
    return this.props.children(this.myRef);
  }
}

class ClassParent extends React.Component {
  render() {
    return (
      <ClassWithRenderProp>
        {myRef => <Button ref={myRef} />}
      </ClassWithRenderProp>
    );
  }
}
```

> Opmerking
>
> Om deze waarschuwing te zien moet je de [babel-plugin-transform-react-jsx-self](https://babeljs.io/docs/en/babel-plugin-transform-react-jsx-self) geinstalleerd hebben in je Babel plugins. Het moet _alleen_ aan staan in de ontwikkel-modus. 
> 
> Als je "Create React App" gebruikt of de "react" preset hebt met Babel 7+, heb je deze plugin standaard al geinstalleerd.

### Uitfasering `React.createFactory` {#deprecating-reactcreatefactory}

[`React.createFactory`](/docs/react-api.html#createfactory) is een verouderde helper om React-elementen aan te maken. Deze release voegt een uitfaseringswaarschuwing toe aan de methode. De methode zal in een toekomstige major versie verwijderd worden.

Vervang gebruik van `React.createFactory` met gewone JSX. Als alternatief kun je de volgende éénregelige helper kopieren en plakken, of het als een bibliotheek publiceren:

```jsx
let createFactory = type => React.createElement.bind(null, type);
```

Dit doet precies hetzelfde.

### `ReactDOM.unstable_createPortal` uitfaseren ten gunste van `ReactDOM.createPortal` {#deprecating-reactdomunstable_createportal-in-favor-of-reactdomcreateportal}

Toen React 16 werd gereleased, werd `createPortal` een officieel ondersteunde API.

Hoewel we `unstable_createPortal` behielden als een ondersteunde alias om een aantal libraries, die het gebruiken, werkend te houden. Faseren we nu de `unstable` alias uit. Gebruik `createPortal` rechtstreeks in plaats van `unstable_createPortal`. Het heeft precies dezelfde parameters.

## Andere Verbeteringen {#other-improvements}

### Component-stacks in hydration waarschuwingen {#component-stacks-in-hydration-warnings}

React voegt component-stacks toe aan zijn ontwikkel-waarschuwingen, die ontwikkelaars in staat stellen om bugs te isoleren en hun programma's te debuggen. Deze release voegt component-stacks toe aan een aantal ontwikkel-waarschuwingen die ze voordien niet hadden. Als voorbeeld, beschouw deze hydration waarschuwing uit de vorige versies:

![Een schermafdruk van de waarschuwing in de console die simpelweg weergeeft wat de soort is van de hydration-mismatch is: "Warning: Expected server HTML to contain a matching div in div."](../images/blog/react-v16.13.0/hydration-warning-before.png)

Hoewel het een fout aanwijst in de code, is het niet duidelijk waar de fout zit en wat we nu moeten doen. Deze release voegt een component-stack toe aan deze waarschuwing waardoor de waarschuwing er als volgt uitziet:

![Een schermafdruk van de waarschuwing in de console die de soort van de hydration mismatch weergeeft, maar ook een component-stack : "Warning: Expected server HTML to contain a matching div in div, in div (at pages/index.js:4)..."](../images/blog/react-v16.13.0/hydration-warning-after.png)

Dit maakt het duidelijker waar het probleem zit en laat je de bug sneller localiseren en repareren. 

### Belangrijke bugfixes {#notable-bugfixes}

Deze release bevat een aantal andere belangrijke verbeteringen:

- In de "Strict Development Mode", roept React de lifecycle methoden twee keer aan om  eventuele ongewenste neveneffecten weg te spoelen. Deze release voegt dat gedrag toe aan `shouldComponentUpdate`. Dit zou geen invloed moeten hebben op de meeste code, tenzij je neveneffecten hebt in `shouldComponentUpdate`. Om dat op te lossen verplaatst je de code met neveneffecten naar `componentDidUpdate`.

- In de "Strict Development Mode", bevatten de waarschuwingen voor het gebruik van de verouderde context API geen stack voor de component die de waarschuwing veroorzaakte. Deze release voegt de ontbrekende stack toe aan de waarschuwing.

- `onMouseEnter` wordt niet meer afgevuurd op `disabled` `<button>`-elementen.

- Er ontbrak een `version` export in ReactDOM sinds we v16 gepubliceerd hadden. Deze release voegt hem weer toe. We raden niet aan om hem in je applicatie-logica te gebruiken, maar het is handing wanneer je problemen oplost met niet overeenkomende of meerdere versies van ReactDOM op dezelfde pagina.

We zijn alle bijdragers dankbaar die geholpen hebben met het aan het licht brengen en oploseen van deze en andere problemen. Je kunt het volledige [hieronder](#changelog) vinden.

## Installatie {#installation}

### React {#react}

React v16.13.0 is beschikbaar in het npm-register.

Om React 16 met Yarn te installeren, run:

```bash
yarn add react@^16.13.0 react-dom@^16.13.0
```

Om React 16 met npm te installeren, run:

```bash
npm install --save react@^16.13.0 react-dom@^16.13.0
```

We voorzien ook in UMD builds van React via een CDN:

```html
<script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
```

Raadpleeg de documentatie voor [gedetailleerde installatie-instructies](/docs/installation.html).

## Changelog {#changelog}

### React {#react}

- Waarschuw wanneer een string ref wordt gebruikt op een manier die niet handelbaar is na een toekomstige code-wijziging ([@lunaruan](https://github.com/lunaruan) in [#17864](https://github.com/facebook/react/pull/17864))
- Deprecate `React.createFactory()` ([@trueadm](https://github.com/trueadm) in [#17878](https://github.com/facebook/react/pull/17878))

### React DOM {#react-dom}

- Waarschuw wanneer wijzigingen in `style` onverwachte botsingen kan veroorzaken ([@sophiebits](https://github.com/sophiebits) in [#14181](https://github.com/facebook/react/pull/14181), [#18002](https://github.com/facebook/react/pull/18002))
- Waarschuw wanneer een functie component wordt geüpdate tijdens een andere component zijn  render fase ([@acdlite](<(https://github.com/acdlite)>) in [#17099](https://github.com/facebook/react/pull/17099))
- Deprecate `unstable_createPortal` ([@trueadm](https://github.com/trueadm) in [#17880](https://github.com/facebook/react/pull/17880))
- Fix dat `onMouseEnter` afgevuurd wordt op `disabled` buttons ([@AlfredoGJ](https://github.com/AlfredoGJ) in [#17675](https://github.com/facebook/react/pull/17675))
- Roep `shouldComponentUpdate` twee keer aan als je in `StrictMode` ontwikkelt ([@bvaughn](https://github.com/bvaughn) in [#17942](https://github.com/facebook/react/pull/17942))
- Voeg `version` property toe aan ReactDOM ([@ealush](https://github.com/ealush) in [#15780](https://github.com/facebook/react/pull/15780))
- Roep geen aan `toString()` van `dangerouslySetInnerHTML` ([@sebmarkbage](https://github.com/sebmarkbage) in [#17773](https://github.com/facebook/react/pull/17773))
- Toon component-stacks in meer waarschuwingen ([@gaearon](https://github.com/gaearon) in [#17922](https://github.com/facebook/react/pull/17922), [#17586](https://github.com/facebook/react/pull/17586))

### Concurrent Mode (Experimenteel) {#concurrent-mode-experimental}

- Waarschuw voor problematisch gebruik van `ReactDOM.createRoot()` ([@trueadm](https://github.com/trueadm) in [#17937](https://github.com/facebook/react/pull/17937))
- Verwijder de `ReactDOM.createRoot()` callback parameters en waarschuwingen toegevoegd bij het gebruik ([@bvaughn](https://github.com/bvaughn) in [#17916](https://github.com/facebook/react/pull/17916))
- Groepeer geen Idle/Offscreen werk met ander werk ([@sebmarkbage](https://github.com/sebmarkbage) in [#17456](https://github.com/facebook/react/pull/17456))
- Pas `SuspenseList` CPU-gebonden heuristiek aan ([@sebmarkbage](https://github.com/sebmarkbage) in [#17455](https://github.com/facebook/react/pull/17455))
- Voeg ontbrekende event plugin prioriteiten toe ([@trueadm](https://github.com/trueadm) in [#17914](https://github.com/facebook/react/pull/17914))
- Fix dat `isPending` alleen waar is tijdens de overgang van binnen een input event ([@acdlite](https://github.com/acdlite) in [#17382](https://github.com/facebook/react/pull/17382))
- Fix dat `React.memo` componenten updates laten schieten als ze onderbroken worden door een update met een hogere prioriteit ([@acdlite](<(https://github.com/acdlite)>) in [#18091](https://github.com/facebook/react/pull/18091))
- Waarschuw niet wanneer `suspending` met de verkeerde prioriteit ([@gaearon](https://github.com/gaearon) in [#17971](https://github.com/facebook/react/pull/17971))
- Fix een bug met rebasing updates ([@acdlite](https://github.com/acdlite) en [@sebmarkbage](https://github.com/sebmarkbage) in [#17560](https://github.com/facebook/react/pull/17560), [#17510](https://github.com/facebook/react/pull/17510), [#17483](https://github.com/facebook/react/pull/17483), [#17480](https://github.com/facebook/react/pull/17480))
